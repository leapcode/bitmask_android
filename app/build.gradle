apply plugin: 'android'

android {
    compileSdkVersion 19
    buildToolsVersion "19.0.3"

    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 19

        testPackageName "se.leap.bitmaskclient.test"
        testInstrumentationRunner "android.test.InstrumentationTestRunner"
    }

    signingConfigs {
        release {
		storeFile project.hasProperty('storeFileProperty') ? file(storeFileProperty) : null
		storePassword project.hasProperty('storePasswordProperty') ?  storePasswordProperty : ""
		keyAlias project.hasProperty('keyAliasProperty') ?  keyAliasProperty : ""
		keyPassword project.hasProperty('keyPasswordProperty') ?  keyPasswordProperty : ""
	}
    }

    buildTypes {
        release {
            runProguard true
	    signingConfig signingConfigs.release.isSigningReady() ? signingConfigs.release : signingConfigs.debug
        }
    }

    lintOptions {
      abortOnError false
    }
    
    sourceSets {
    	main {
	  assets.srcDirs = ['assets', 'ovpnlibs/assets']
	  jniLibs.srcDirs = ['ovpnlibs/jniLibs']
	  jni.srcDirs = [] //disable automatic ndk-build
        }
	debug {
 	  assets.srcDirs = ['src/debug/assets']
	}
    }

    check.dependsOn connectedCheck
 }

dependencies {
    androidTestCompile 'com.android.support:support-v4:+'
    androidTestCompile 'com.jayway.android.robotium:robotium-solo:4.3.1'
}